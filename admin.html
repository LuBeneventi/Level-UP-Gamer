<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrador - Level-Up Gamer</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Orbitron:wght@400;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <link rel="stylesheet" href="styles.css">

    <style>
        .admin-sidebar {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            min-height: 100vh;
            border-right: 2px solid #1E90FF;
        }

        .admin-content {
            background: #0a0a0a;
            min-height: 100vh;
        }

        .admin-card {
            background: rgba(30, 144, 255, 0.1);
            border: 1px solid #1E90FF;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .stats-card {
            background: linear-gradient(135deg, rgba(57, 255, 20, 0.1) 0%, rgba(30, 144, 255, 0.1) 100%);
            border: 1px solid #39FF14;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stats-card:hover {
            transform: translateY(-5px);
        }

        .product-table {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 10px;
        }

        .btn-admin {
            background: linear-gradient(45deg, #1E90FF, #39FF14);
            border: none;
            color: white;
            font-weight: 600;
        }

        .btn-admin:hover {
            background: linear-gradient(45deg, #39FF14, #1E90FF);
            color: white;
        }

        .sidebar-nav .nav-link {
            color: #D3D3D3;
            padding: 15px 20px;
            border-radius: 8px;
            margin: 5px 0;
            transition: all 0.3s ease;
        }

        .sidebar-nav .nav-link:hover,
        .sidebar-nav .nav-link.active {
            background: rgba(30, 144, 255, 0.2);
            color: #1E90FF;
            transform: translateX(5px);
        }

        .admin-header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border-bottom: 2px solid #1E90FF;
            padding: 20px 0;
        }
    </style>
</head>

<body>

    <div class="admin-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <img src="images/logo.png" alt="Level-Up Gamer" height="40" class="me-3">
                        <h3 class="text-white mb-0">Panel de Administración</h3>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <div class="d-flex align-items-center justify-content-end">
                        <span class="text-light me-3">
                            <i class="fas fa-user-shield me-2"></i>Administrador
                        </span>
                        <a href="index.html" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-home me-2"></i>Ver Sitio
                        </a>
                        <button class="btn btn-outline-danger btn-sm ms-2" onclick="logout()">
                            <i class="fas fa-sign-out-alt me-2"></i>Cerrar Sesión
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-2 admin-sidebar p-0">
                <nav class="sidebar-nav p-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#dashboard" onclick="showSection('dashboard')">
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#products" onclick="showSection('products')">
                                <i class="fas fa-box me-2"></i>Gestión de Productos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#orders" onclick="showSection('orders')">
                                <i class="fas fa-shopping-cart me-2"></i>Pedidos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#users" onclick="showSection('users')">
                                <i class="fas fa-users me-2"></i>Usuarios
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#analytics" onclick="showSection('analytics')">
                                <i class="fas fa-chart-bar me-2"></i>Analíticas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#events" onclick="showSection('events')">
                                <i class="fas fa-calendar-alt me-2"></i>Gestión de Eventos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#settings" onclick="showSection('settings')">
                                <i class="fas fa-cog me-2"></i>Configuración
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>

            <div class="col-md-10 admin-content p-4">
                <div id="dashboard" class="admin-section">
                    <h2 class="text-white mb-4">
                        <i class="fas fa-tachometer-alt me-2 text-electric-blue"></i>Dashboard
                    </h2>
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <div class="stats-card">
                                <i class="fas fa-box fa-2x text-electric-blue mb-2"></i>
                                <h4 class="text-white" id="total-products">0</h4>
                                <p class="text-light-gray mb-0">Total Productos</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="stats-card">
                                <i class="fas fa-shopping-cart fa-2x text-neon-green mb-2"></i>
                                <h4 class="text-white" id="total-orders">0</h4>
                                <p class="text-light-gray mb-0">Pedidos Hoy</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="stats-card">
                                <i class="fas fa-users fa-2x text-electric-blue mb-2"></i>
                                <h4 class="text-white" id="total-users">0</h4>
                                <p class="text-light-gray mb-0">Usuarios Registrados</p>
                            </div>
                        </div>
                        <div class="col-md-3 mb-3">
                            <div class="stats-card">
                                <i class="fas fa-dollar-sign fa-2x text-neon-green mb-2"></i>
                                <h4 class="text-white" id="total-sales">$0</h4>
                                <p class="text-light-gray mb-0">Ventas del Mes</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="products" class="admin-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="text-white mb-0">
                            <i class="fas fa-box me-2 text-electric-blue"></i>Gestión de Productos
                        </h2>
                        <div>
                            <a href="productos.html" target="_blank" class="btn btn-outline-info me-2">
                                <i class="fas fa-external-link-alt me-2"></i>Ver en Sitio
                            </a>
                            <button class="btn btn-admin" data-bs-toggle="modal" data-bs-target="#addProductModal">
                                <i class="fas fa-plus me-2"></i>Agregar Producto
                            </button>
                        </div>
                    </div>
                    <div class="admin-card p-4">
                        <div class="table-responsive">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Imagen</th>
                                        <th>Nombre</th>
                                        <th>Categoría</th>
                                        <th>Precio</th>
                                        <th>Stock</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="products-table-body">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="orders" class="admin-section" style="display: none;">
                    <h2 class="text-white mb-4">
                        <i class="fas fa-shopping-cart me-2 text-electric-blue"></i>Gestión de Pedidos
                    </h2>
                    <div class="mb-3 d-flex justify-content-between align-items-end">
                        <div class="d-flex gap-3">
                            <div>
                                <label for="orderDateFilter" class="form-label text-white">Ordenar por fecha:</label>
                                <select id="orderDateFilter" class="form-select w-auto">
                                    <option value="desc" selected>Más reciente primero</option>
                                    <option value="asc">Más antiguo primero</option>
                                </select>
                            </div>

                            <div>
                                <label for="orderSearchInput" class="form-label text-white">Buscar por cliente:</label>
                                <input type="text" id="orderSearchInput" class="form-control w-auto"
                                    placeholder="Nombre del cliente...">
                            </div>
                        </div>

                        <!-- Botón a la derecha -->
                        <button id="refreshOrdersBtn" class="btn btn-sm btn-dark" title="Actualizar pedidos">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="admin-card p-4">
                        <div class="table-responsive">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        <th>#Pedido</th>
                                        <th>Cliente</th>
                                        <th>Fecha</th>
                                        <th>Total</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="users" class="admin-section" style="display: none;">
                    <h2 class="text-white mb-4">
                        <i class="fas fa-users me-2 text-electric-blue"></i>Gestión de Usuarios
                    </h2>
                    <div class="admin-card p-4">
                        <div class="table-responsive">
                            <table class="table table-dark table-hover">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Email</th>
                                        <th>Fecha Registro</th>
                                        <th>Nivel</th>
                                        <th>Puntos</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="analytics" class="admin-section" style="display: none;">
                    <h2 class="text-white mb-4">
                        <i class="fas fa-chart-bar me-2 text-electric-blue"></i>Analíticas y Reportes
                    </h2>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="admin-card p-4">
                                <h5 class="text-white mb-3">Ventas por Categoría</h5>
                                <div class="chart-placeholder text-center py-5">
                                    <i class="fas fa-chart-pie fa-3x text-electric-blue mb-3"></i>
                                    <p class="text-light-gray">Gráfico de ventas por categoría</p>
                                    <small class="text-muted">Integrar con Chart.js o similar</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="admin-card p-4">
                                <h5 class="text-white mb-3">Tendencia de Ventas</h5>
                                <div class="chart-placeholder text-center py-5">
                                    <i class="fas fa-chart-line fa-3x text-neon-green mb-3"></i>
                                    <p class="text-light-gray">Gráfico de tendencia mensual</p>
                                    <small class="text-muted">Integrar con Chart.js o similar</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="events" class="admin-section" style="display: none;">
                    <h2 class="text-white mb-4">
                        <i class="fas fa-calendar-alt me-2 text-electric-blue"></i>Gestión de Eventos
                    </h2>
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="admin-card p-4">
                                <h5 class="text-white mb-3">Agregar Nuevo Evento</h5>
                                <form id="addEventForm">
                                    <div class="mb-3">
                                        <label for="eventName" class="form-label text-white">Nombre del Evento</label>
                                        <input type="text" class="form-control" id="eventName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="eventDescription" class="form-label text-white">Descripción</label>
                                        <textarea class="form-control" id="eventDescription" rows="3"
                                            required></textarea>
                                    </div>
                                    <div class="mb-3">
                                        <label for="eventDate" class="form-label text-white">Fecha</label>
                                        <input type="date" class="form-control" id="eventDate" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="eventLocation" class="form-label text-white">Lugar</label>
                                        <input type="text" class="form-control" id="eventLocation" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="eventPoints" class="form-label text-white">Puntos LevelUp</label>
                                        <input type="number" class="form-control" id="eventPoints" required>
                                    </div>
                                    <button type="submit" class="btn btn-admin">Guardar Evento</button>
                                </form>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="admin-card p-4">
                                <h5 class="text-white mb-3">Lista de Eventos Existentes</h5>
                                <ul id="eventos-list" class="list-group list-group-flush">
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="settings" class="admin-section" style="display: none;">
                    <h2 class="text-white mb-4">
                        <i class="fas fa-cog me-2 text-electric-blue"></i>Configuración del Sistema
                    </h2>
                    <div class="admin-card p-4">
                        <form>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-white">Nombre de la Tienda</label>
                                    <input type="text" class="form-control" value="Level-Up Gamer">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-white">Email de Contacto</label>
                                    <input type="email" class="form-control" value="info@levelupgamer.cl">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-white">Descuento Duoc (%)</label>
                                    <input type="number" class="form-control" value="20">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label text-white">Puntos por Referido</label>
                                    <input type="number" class="form-control" value="100">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-admin">
                                <i class="fas fa-save me-2"></i>Guardar Configuración
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addProductModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-white">
                        <i class="fas fa-plus me-2 text-neon-green"></i>Agregar Nuevo Producto
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addProductForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Código del Producto</label>
                                <input type="text" class="form-control" id="productCode" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Nombre del Producto</label>
                                <input type="text" class="form-control" id="productName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Categoría</label>
                                <select class="form-control" id="productCategory" required>
                                    <option value="">Seleccionar categoría</option>
                                    <option value="juegos-mesa">Juegos de Mesa</option>
                                    <option value="accesorios">Accesorios</option>
                                    <option value="consolas">Consolas</option>
                                    <option value="computadores">Computadores Gamers</option>
                                    <option value="sillas">Sillas Gamers</option>
                                    <option value="mouse">Mouse</option>
                                    <option value="mousepad">Mousepad</option>
                                    <option value="ropa">Ropa Gamer</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Precio (CLP)</label>
                                <input type="number" class="form-control" id="productPrice" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Stock</label>
                                <input type="number" class="form-control" id="productStock" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Rating (1-5)</label>
                                <input type="number" class="form-control" id="productRating" min="1" max="5" step="0.1"
                                    value="4.5">
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label text-white">Descripción</label>
                                <textarea class="form-control" id="productDescription" rows="3" required></textarea>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label text-white">Imagen del Producto</label>
                                <div class="mb-2">
                                    <input type="file" class="form-control" id="productImageFile" accept="image/*"
                                        onchange="previewImage(this, 'imagePreview')">
                                    <small class="text-muted">Sube una imagen desde tu PC (JPG, PNG, GIF)</small>
                                </div>
                                <div class="mb-2">
                                    <input type="url" class="form-control" id="productImage"
                                        placeholder="O ingresa una URL de imagen">
                                    <small class="text-muted">Alternativamente, usa una URL de imagen</small>
                                </div>
                                <div id="imagePreview" class="mt-2" style="display: none;">
                                    <img id="previewImg" src="/placeholder.svg" alt="Vista previa"
                                        style="max-width: 200px; max-height: 200px; border-radius: 8px;">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-admin" onclick="addProduct()">
                        <i class="fas fa-save me-2"></i>Guardar Producto
                    </button>
                    <button type="button" class="btn btn-outline-success" onclick="addProductAndView()">
                        <i class="fas fa-save me-2"></i>Guardar y Ver
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="editProductModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-white">
                        <i class="fas fa-edit me-2 text-electric-blue"></i>Editar Producto
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editProductForm">
                        <input type="hidden" id="editProductId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Código del Producto</label>
                                <input type="text" class="form-control" id="editProductCode" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Nombre del Producto</label>
                                <input type="text" class="form-control" id="editProductName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Categoría</label>
                                <select class="form-control" id="editProductCategory" required>
                                    <option value="juegos-mesa">Juegos de Mesa</option>
                                    <option value="accesorios">Accesorios</option>
                                    <option value="consolas">Consolas</option>
                                    <option value="computadores">Computadores Gamers</option>
                                    <option value="sillas">Sillas Gamers</option>
                                    <option value="mouse">Mouse</option>
                                    <option value="mousepad">Mousepad</option>
                                    <option value="ropa">Ropa Gamer</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Precio (CLP)</label>
                                <input type="number" class="form-control" id="editProductPrice" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Stock</label>
                                <input type="number" class="form-control" id="editProductStock" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label text-white">Rating (1-5)</label>
                                <input type="number" class="form-control" id="editProductRating" min="1" max="5"
                                    step="0.1">
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label text-white">Descripción</label>
                                <textarea class="form-control" id="editProductDescription" rows="3" required></textarea>
                            </div>
                            <div class="col-12 mb-3">
                                <label class="form-label text-white">Imagen del Producto</label>
                                <div class="mb-2">
                                    <input type="file" class="form-control" id="editProductImageFile" accept="image/*"
                                        onchange="previewImage(this, 'editImagePreview')">
                                    <small class="text-muted">Sube una nueva imagen desde tu PC</small>
                                </div>
                                <div class="mb-2">
                                    <input type="url" class="form-control" id="editProductImage"
                                        placeholder="O ingresa una URL de imagen">
                                    <small class="text-muted">Alternativamente, usa una URL de imagen</small>
                                </div>
                                <div id="editImagePreview" class="mt-2" style="display: none;">
                                    <img id="editPreviewImg" src="/placeholder.svg" alt="Vista previa"
                                        style="max-width: 200px; max-height: 200px; border-radius: 8px;">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-admin" onclick="updateProduct()">
                        <i class="fas fa-save me-2"></i>Actualizar Producto
                    </button>
                    <button type="button" class="btn btn-outline-success" onclick="updateProductAndView()">
                        <i class="fas fa-save me-2"></i>Actualizar y Ver
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="orderModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Detalles del Pedido</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="orderModalBody">
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="editUserModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title">Editar Usuario</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editUserForm">
                        <input type="hidden" id="editUserId">

                        <div class="mb-3">
                            <label for="editUserName" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="editUserName" required>
                        </div>

                        <div class="mb-3">
                            <label for="editUserPoints" class="form-label">Puntos</label>
                            <input type="number" class="form-control" id="editUserPoints" required>
                        </div>

                        <div class="mb-3">
                            <label for="editUserLevel" class="form-label">Nivel</label>
                            <!-- Cambiamos el input por un select dinámico -->
                            <select class="form-select bg-dark text-white border-secondary" id="editUserLevel" required>
                                <!-- Las opciones se generan dinámicamente desde JS -->
                            </select>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-admin" onclick="saveUserChanges()">Guardar Cambios</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="admin.js"></script>
</body>

</html>